## Minimal defaults to get catalogs to compile
profile::base::labs::unattended_wmf: 'present'
profile::base::labs::unattended_distro: 'present'
profile::openstack::eqiad1::version: 'rocky'
profile::base::labs::clean_kernels: false

mail_smarthost:
- 'mx-out01.wmflabs.org'
- 'mx-out02.wmflabs.org'
wikimail_smarthost:
- 'mx-out01.wmflabs.org'
- 'mx-out02.wmflabs.org'

ntp_peers:
    eqiad:
    - 'ntp-01.cloudinfra.wmflabs.org'
    - 'ntp-02.cloudinfra.wmflabs.org'
    codfw: []
    ulsfo: []
    eqsin: []
    esams: []

## Disable remote syslog logging, as it breaks rsyslog in cloud VPSes.
profile::base::remote_syslog: []
profile::base::remote_syslog_tls: []

## Customizations
pontoon::stack: 'mariadb104-test'

profile::base::use_apt_proxy: false

## SSH access
bastion_hosts:
  - 172.16.0.0/12
## hosts using "CACHES" in firewall config
cache_hosts:
  - 172.16.0.0/12

## Puppet CA management
manage_puppet_ca_file: false
puppetmaster: "%{alias('__master_for_role_puppetmaster__pontoon')}"
puppet_ca_server: "%{alias('__master_for_role_puppetmaster__pontoon')}"

# PuppetDB
profile::puppetmaster::common::puppetdb_hosts: "%{alias('__hosts_for_role_puppetmaster__puppetdb')}"
profile::puppetmaster::common::storeconfigs: puppetdb
puppetdb_host: "%{alias('__master_for_role_puppetmaster__puppetdb')}"
profile::puppetdb::master: "%{alias('__master_for_role_puppetmaster__puppetdb')}"
profile::puppetdb::jvm_opts: '-Xmx256m'

# To open puppetdb firewall
puppetmaster::servers:
  pontoon:
    - { worker: "%{alias('__master_for_role_puppetmaster__pontoon')}", loadfactor: 10 }

cumin_masters:
  - 172.16.2.34 # cumin.mariadb104-test.eqiad.wmflabs
